(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/PartRunning/PartRunning"],{"302e":function(e,t,n){},"33b8":function(e,t,n){"use strict";n.r(t);var i=n("df06"),r=n("f722");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("a48a");var s,u=n("f0c5"),c=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=c.exports},"7be4":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("4795")),r=n("e83a");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,i,r,o,s){try{var u=e[o](s),c=u.value}catch(a){return void n(a)}u.done?t(c):Promise.resolve(c).then(i,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function u(e){s(o,i,r,u,c,"next",e)}function c(e){s(o,i,r,u,c,"throw",e)}u(void 0)}))}}var c=function(){n.e("components/CircleButton").then(function(){return resolve(n("7c65"))}.bind(null,n)).catch(n.oe)},a={prepare:"prepare",work:"work",rest:"rest"},f={data:function(){return{STATUS:a,status:a.prepare,timeInfo:{},percent:0,startTime:0,currentCount:0,workTimeSec:0,restTimeSec:0,preTimeSec:4,totalTimeSec:0,pauseTime:null,finish:!1}},computed:{toggleIcon:function(){return this.pauseTime?"icon-play":"icon-pause"}},watch:{preTimeSec:function(e){[3,2,1].includes(e)?(0,r.setAudio)("ding.mp3"):0===e&&(0,r.setAudio)("dong.mp3")},restTimeSec:function(e){[3,2,1].includes(e)?(0,r.setAudio)("ding.mp3"):0===e&&(0,r.setAudio)("dong.mp3")},workTimeSec:function(e){0===e&&(0,r.setAudio)("rest.mp3")}},onShow:function(){var t=e.getStorageSync("timeInfo");t&&(this.timeInfo=t,this.workTimeSec=this.timeInfo.workTime,this.restTimeSec=this.timeInfo.restTime,this.timeInfo.totalTime=this.timeInfo.workTime*this.timeInfo.count+this.timeInfo.restTime*(this.timeInfo.count-1),this.timeInfo.countTime=this.timeInfo.workTime+this.timeInfo.restTime)},mounted:function(){this.startTime=Date.now(),(0,r.keepScreen)(!0),this.startCount()},beforeDestroy:function(){(0,r.keepScreen)(!1)},methods:{startCount:function(){var e=this;return u(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.pauseTime&&!e.finish){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,r.delay)(50);case 4:e.updateCount(),e.startCount();case 6:case"end":return t.stop()}}),t)})))()},updateCount:function(){var e=this.timeInfo,t=e.workTime,n=e.restTime,i=e.count,o=e.totalTime,s=e.countTime,u=Date.now(),c=u-this.startTime,f=Math.floor(c/1e3),m=3;if(f<m){var l=m-f;this.preTimeSec=l,this.percent=c/(1e3*m)*100,this.status=a.prepare}else{this.totalTimeSec=o-f+m,this.preTimeSec=0;var h=f-m,d=c-1e3*m;this.currentCount=Math.floor(h/s)+1;var p=h%s,T=d%(1e3*s);if(p<t){this.restTimeSec=0;var v=1e3*t-T;this.workTimeSec=Math.floor(v/1e3)+1,this.percent=v/(1e3*t)*100,this.status=a.work}else{if(this.currentCount>=i)return this.workTimeSec=-1,this.percent=0,this.finish=!0,void(0,r.setAudio)("success.mp3");console.log("rest"),this.status=a.rest,this.workTimeSec=0;var S=1e3*n-(T-1e3*t);this.restTimeSec=Math.floor(S/1e3)+1,this.percent=100-S/(1e3*n)*100}}},togglePlay:function(){this.pauseTime?(this.startTime+=Date.now()-this.pauseTime,this.pauseTime=null,(0,r.keepScreen)(!0),this.startCount()):((0,r.keepScreen)(!1),this.pauseTime=Date.now())},handleClickStop:function(){e.redirectTo({url:"../index/index"})}},components:{CircleButton:c}};t.default=f}).call(this,n("543d")["default"])},"80d9":function(e,t,n){"use strict";(function(e){n("9b22");i(n("66fd"));var t=i(n("33b8"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},a48a:function(e,t,n){"use strict";var i=n("302e"),r=n.n(i);r.a},df06:function(e,t,n){"use strict";var i,r=function(){var e=this,t=e.$createElement,n=(e._self._c,e._f("formatTime")(e.workTimeSec)),i=e._f("formatTime")(e.restTimeSec),r=e._f("formatTime")(e.totalTimeSec);e.$mp.data=Object.assign({},{$root:{f0:n,f1:i,f2:r}})},o=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}))},f722:function(e,t,n){"use strict";n.r(t);var i=n("7be4"),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a}},[["80d9","common/runtime","common/vendor"]]]);